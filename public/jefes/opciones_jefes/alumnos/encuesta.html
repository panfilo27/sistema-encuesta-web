<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administración de Encuestas</title>
    <link rel="stylesheet" href="../../../../css/admin/opciones_admin/alumnos/encuesta.css">
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="administracion-encuestas" class="administracion-encuestas">
        <div class="encuestas-header">
            <h2>Administración de Encuestas</h2>
            <button id="btn-nueva-encuesta" class="btn-nueva-encuesta">
                <i class="fas fa-plus"></i> Nueva Encuesta
            </button>
        </div>
        
        <!-- Estadísticas generales -->
        <div id="estadisticas-encuestas" class="estadisticas-encuestas">
            <!-- Aquí se cargarán las estadísticas -->
            <p class="cargando">Cargando estadísticas...</p>
        </div>
        
        <!-- Formulario para nueva encuesta -->
        <div id="formulario-nueva-encuesta" class="formulario-nueva-encuesta">
            <h3>Crear Nueva Encuesta</h3>
            <form id="form-nueva-encuesta">
                <div class="form-group">
                    <label for="titulo-encuesta">Título de la Encuesta:</label>
                    <input type="text" id="titulo-encuesta" required>
                </div>
                
                <div class="form-group">
                    <label for="descripcion-encuesta">Descripción:</label>
                    <textarea id="descripcion-encuesta" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="fecha-inicio-encuesta">Fecha de Inicio:</label>
                    <input type="date" id="fecha-inicio-encuesta" required>
                </div>
                
                <div class="form-group">
                    <label for="fecha-fin-encuesta">Fecha de Fin:</label>
                    <input type="date" id="fecha-fin-encuesta" required>
                </div>
                
                <span id="error-encuesta" class="error-mensaje"></span>
                
                <div class="form-buttons">
                    <button type="button" id="btn-cancelar-encuesta" class="btn-cancelar">Cancelar</button>
                    <button type="submit" class="btn-guardar">Guardar Encuesta</button>
                </div>
            </form>
        </div>
        
        <!-- Tabla de encuestas activas -->
        <div class="tabla-encuestas">
            <h3>Encuestas Configuradas</h3>
            <div id="tabla-encuestas-activas">
                <!-- Aquí se cargará la tabla de encuestas -->
                <p class="cargando">Cargando encuestas...</p>
            </div>
        </div>
    </div>
    
    <!-- Modal para ver estadísticas detalladas de una encuesta -->
    <div id="modal-estadisticas-encuesta" class="modal-estadisticas">
        <div class="modal-contenido">
            <span class="cerrar-modal">&times;</span>
            <div id="contenido-estadisticas-encuesta">
                <!-- Aquí se cargarán las estadísticas de la encuesta -->
            </div>
        </div>
    </div>
    
    <!-- Scripts necesarios -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="../../../../js/firebase-init.js"></script>
    <script src="../../../../js/admin/opciones_admin/alumnos/encuesta.js"></script>
    
    <script>
        // Cerrar modal cuando se hace clic en la X
        document.querySelector('.cerrar-modal').addEventListener('click', function() {
            document.getElementById('modal-estadisticas-encuesta').style.display = 'none';
        });
        
        // Cerrar modal cuando se hace clic fuera del contenido
        window.addEventListener('click', function(event) {
            if (event.target == document.getElementById('modal-estadisticas-encuesta')) {
                document.getElementById('modal-estadisticas-encuesta').style.display = 'none';
            }
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Encuestas - Sistema de Encuestas ITVER</title>
    <link rel="stylesheet" href="../../../css/admin/opciones_admin/crear_encuestas/crear_encuestas.css">
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="contenedor-crear-encuestas">
        <!-- Sección superior: Lista de encuestas existentes -->
        <section class="seccion-encuestas-existentes">
            <h2>Encuestas existentes</h2>
            <div class="filtro-encuestas">
                <input type="text" id="buscar-encuesta" placeholder="Buscar encuesta...">
                <select id="filtro-carrera">
                    <option value="">Todas las carreras</option>
                    <!-- Opciones de carreras se cargarán dinámicamente -->
                </select>
            </div>
            <div class="tabla-encuestas-container">
                <table id="tabla-encuestas">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Carrera</th>
                            <th>Fecha de creación</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="lista-encuestas">
                        <!-- Aquí se cargarán las encuestas dinámicamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Sección inferior: Crear nueva encuesta -->
        <section class="seccion-crear-encuesta">
            <h2>Crear nueva encuesta</h2>
            <form id="form-encuesta">
                <div class="form-group">
                    <label for="nombre-encuesta">Nombre de la encuesta:</label>
                    <input type="text" id="nombre-encuesta" required>
                </div>
                <div class="form-group">
                    <label for="descripcion-encuesta">Descripción:</label>
                    <textarea id="descripcion-encuesta" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="carrera-encuesta">Carrera:</label>
                    <select id="carrera-encuesta" required>
                        <option value="">Selecciona una carrera</option>
                        <!-- Opciones de carreras se cargarán dinámicamente -->
                    </select>
                </div>

                <!-- Sección de módulos -->
                <div class="seccion-modulos">
                    <h3>Módulos de la encuesta</h3>
                    <div class="tabs-modulos-container">
                        <div class="tabs-modulos" id="tabs-modulos">
                            <!-- Aquí se cargarán los tabs de módulos dinámicamente -->
                        </div>
                        <button type="button" id="btn-agregar-modulo" title="Agregar módulo">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="contenido-modulo" id="contenido-modulo">
                        <!-- Aquí se cargará el contenido del módulo seleccionado -->
                        <div class="placeholder-modulo">
                            <p>Selecciona o crea un módulo para comenzar</p>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="btn-cancelar-encuesta" class="btn-cancelar">Cancelar</button>
                    <button type="submit" id="btn-guardar-encuesta" class="btn-guardar">Guardar encuesta</button>
                </div>
            </form>
        </section>
    </div>

    <!-- Cargando spinner -->
    <div id="cargando" style="display: none;">
        <div class="spinner"></div>
        <p>Procesando, por favor espere...</p>
    </div>

    <!-- Modal para crear/editar módulo -->
    <div id="modal-modulo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="titulo-modal-modulo">Nuevo módulo</h3>
                <span class="cerrar-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="form-modulo">
                    <div class="form-group">
                        <label for="nombre-modulo">Nombre del módulo:</label>
                        <input type="text" id="nombre-modulo" required>
                    </div>
                    <div class="form-group">
                        <label for="descripcion-modulo">Descripción:</label>
                        <textarea id="descripcion-modulo" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="btn-cancelar-modulo" class="btn-cancelar">Cancelar</button>
                        <button type="submit" id="btn-guardar-modulo" class="btn-guardar">Guardar módulo</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="../../../js/firebase-config.js"></script>
    <script src="../../../js/admin/opciones_admin/crear_encuestas/gestor_encuestas.js"></script>
    <script src="../../../js/admin/opciones_admin/crear_encuestas/gestor_modulos.js"></script>
    <script src="../../../js/admin/opciones_admin/crear_encuestas/gestor_preguntas.js"></script>
    <script src="../../../js/admin/opciones_admin/crear_encuestas/gestor_preguntas_condicionales.js"></script>
    <script src="../../../js/admin/opciones_admin/crear_encuestas/cargar_carreras.js"></script>
</body>
</html>

<!-- Enlace al CSS -->
<link rel="stylesheet" href="/public/css/admin/opciones_admin/avisos.css">

<div class="avisos-contenedor">
    <div class="avisos-header">
        <h1>Gestión de Avisos</h1>
        <p>Publica avisos importantes para alumnos y personal</p>
    </div>
    
    <!-- Formulario de datos -->
    <div class="formulario-container">
        <h2>Datos del Aviso</h2>
        <form id="form-aviso">
            <!-- Campo oculto para ID en modo edición -->
            <input type="hidden" id="id-aviso" value="">
            
            <div class="form-section">
                <h3>Información del Aviso</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="titulo-aviso">Título del Aviso:</label>
                        <input type="text" id="titulo-aviso" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="carrera-aviso">Dirigido a Carrera:</label>
                        <select id="carrera-aviso">
                            <option value="">Todas las Carreras</option>
                            <!-- Las opciones se cargarán dinámicamente desde Firestore -->
                        </select>
                        <small>Si no se selecciona, el aviso se mostrará a todos</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="descripcion-aviso">Descripción:</label>
                    <textarea id="descripcion-aviso" rows="5" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="imagen-aviso">Imagen (opcional):</label>
                    <div class="image-upload-container">
                        <div class="image-preview-container" id="preview-container">
                            <img id="imagen-preview" src="" alt="Vista previa" style="display: none;">
                            <div id="no-image-placeholder">Sin imagen</div>
                        </div>
                        <div class="image-buttons">
                            <label for="file-upload" class="custom-file-upload">
                                <i class="fas fa-upload"></i> Seleccionar imagen
                            </label>
                            <input id="file-upload" type="file" accept="image/*">
                            <button type="button" id="remove-image" class="btn-secondary" style="display: none;">
                                <i class="fas fa-trash-alt"></i> Eliminar imagen
                            </button>
                        </div>
                        <small>Formato recomendado: JPG, PNG. Tamaño máximo: 2MB</small>
                    </div>
                </div>
                
                <div class="form-row fecha-vigencia">
                    <div class="form-group">
                        <label for="fecha-inicio">Fecha de Inicio:</label>
                        <input type="date" id="fecha-inicio" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="fecha-fin">Fecha de Fin:</label>
                        <input type="date" id="fecha-fin" required>
                    </div>
                </div>
            </div>
            
            <div class="form-buttons">
                <button type="submit" class="btn-primary">Guardar</button>
                <button type="button" id="cancelar-aviso" class="btn-secondary">Cancelar</button>
            </div>
        </form>
    </div>
    
    <!-- Lista de avisos -->
    <div class="lista-container">
        <h2>Lista de Avisos</h2>
        <div class="search-container">
            <input type="text" id="buscar-aviso" placeholder="Buscar por título">
            <button id="btn-buscar-aviso"><i class="fas fa-search"></i> Buscar</button>
        </div>
        
        <div id="tabla-avisos" class="tabla-container">
            <!-- La tabla se cargará dinámicamente desde JavaScript -->
        </div>
    </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics-compat.js"></script>

<!-- Scripts propios -->
<script src="../../js/firebase-init.js"></script>
<script src="../../js/admin/opciones_admin/avisos.js"></script>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Personal</title>
    <!-- Enlace al archivo CSS externo -->
    <link rel="stylesheet" href="/public/css/admin/opciones_admin/personal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="cuerpo-personal">
        <h1>Gestión de Personal</h1>
        <p>Administra al personal y asigna roles de jefes de departamento</p>
        
        <!-- Formulario de datos -->
        <div class="formulario-container">
            <h2>Datos del Personal</h2>
                <form id="form-personal">
                    <!-- Campo oculto para ID en modo edición -->
                    <input type="hidden" id="id-personal" value="">
                    <div class="form-section">
                        <h3>Información Personal</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombre-personal">Nombre(s):</label>
                                <input type="text" id="nombre-personal" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="apellido-paterno">Apellido Paterno:</label>
                                <input type="text" id="apellido-paterno" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="apellido-materno">Apellido Materno:</label>
                                <input type="text" id="apellido-materno">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Información de Cuenta</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="usuario-personal">Nombre de Usuario:</label>
                                <input type="text" id="usuario-personal" required>
                                <small>Este será el nombre de usuario para iniciar sesión</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="contrasena-personal">Contraseña:</label>
                                <input type="password" id="contrasena-personal" required>
                                <small>Mínimo 6 caracteres</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmar-contrasena">Confirmar Contraseña:</label>
                                <input type="password" id="confirmar-contrasena" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Departamento</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="departamento-personal">Departamento (opcional):</label>
                                <select id="departamento-personal">
                                    <option value="">Sin asignar</option>
                                    <!-- Las opciones se cargarán dinámicamente desde Firestore -->
                                </select>
                            </div>
                            <!-- Campo oculto para el rol fijo -->
                            <input type="hidden" id="rol-personal" value="jefedepartamento">
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <input type="hidden" id="personal-id">
                        <button type="submit" class="btn-primary">Guardar</button>
                        <button type="button" id="btn-cancelar" class="btn-secondary">Cancelar</button>
                    </div>
                </form>
            </div>
            
        <!-- Lista de personal -->
        <div class="lista-container">
            <h2>Lista de Personal</h2>
            <div class="search-container">
                <input type="text" id="buscar-personal" placeholder="Buscar por nombre o usuario">
                <button id="btn-buscar-personal"><i class="fas fa-search"></i> Buscar</button>
            </div>
            
            <div id="tabla-personal" class="tabla-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Nombre Completo</th>
                                <th>Rol</th>
                                <th>Departamento</th>
                                <th>Última Actualización</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="lista-personal">
                            <tr>
                                <td colspan="6">Cargando información del personal...</td>
                            </tr>
                        </tbody>
                    </table>
                </div><!-- fin tabla-container -->
            </div><!-- fin panel-tabla -->
        </div><!-- fin panel-container -->
    </div>

    <!-- El CSS externo ahora incluye todos los estilos necesarios -->

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics-compat.js"></script>
    
    <!-- Inicialización de Firebase -->
    <script src="../../js/firebase-init.js"></script>
    
    <!-- JavaScript -->
    <script src="../../js/admin/opciones_admin/personal.js"></script>
</body>
</html>
